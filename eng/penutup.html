<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penutup & Bonus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Menambahkan Font dari Google Fonts untuk desain sertifikat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@400;600&family=Tangerine:wght@700&display=swap" rel="stylesheet">
    <!-- Menambahkan library html2canvas untuk mengubah HTML menjadi gambar -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f3ff; /* Light purple background */
        }
        .lesson-card {
            scroll-margin-top: 80px;
        }
        .bonus-list li {
            padding: 10px 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            background-color: #ede9fe;
            border-left: 4px solid #8b5cf6;
        }
        /* Wrapper untuk membuat sertifikat responsif di layar */
        #certificate-wrapper {
            width: 100%;
            max-width: 794px; /* Lebar A4 Potret */
            margin: auto;
            border: 1px solid #ddd;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        /* Desain Sertifikat Baru (Potret) */
        #certificate {
            width: 794px; /* A4 width (portrait) */
            height: 1123px; /* A4 height (portrait) */
            padding: 50px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #fdfdfb; /* Warna latar belakang cream */
            /* Mengganti background-image dengan border CSS */
            border: 20px solid transparent;
            border-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3Epath%7Bfill:%23a78bfa%7D%3C/style%3E%3Cpath d='M25 0 L50 25 L75 0 L100 25 L100 50 L75 75 L100 100 L75 100 L50 75 L25 100 L0 100 L0 75 L25 50 L0 25 Z' /%3E%3C/svg%3E") 30 stretch;
            position: relative;
        }
        .font-cinzel { font-family: 'Cinzel', serif; }
        .font-tangerine { font-family: 'Tangerine', cursive; }
        .input-group {
            margin-bottom: 1rem;
        }
        .input-group label {
            display: block;
            text-align: left;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .input-group input {
            width: 100%;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Sticky Header -->
    <header class="bg-white/80 backdrop-blur-lg shadow-md sticky top-0 z-50">
        <div class="container mx-auto p-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-purple-600">üèÅ Penutup & Bonus</h1>
            <a href="index.html" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                &larr; Kembali ke Menu
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-6 md:p-10">
        <!-- Bagian Game tidak diubah -->
        <section id="bonus-31" class="lesson-card bg-white p-6 md:p-8 rounded-2xl shadow-lg mb-8">
             <h2 class="text-2xl font-bold text-purple-700 mb-4">31. Evaluasi Interaktif (Terjemahkan Kata) üéÆ</h2>
            <div id="game-container" class="text-center bg-purple-50 p-6 rounded-lg">
                <p class="text-lg mb-2">Terjemahkan kata ini:</p>
                <div id="clue-word" class="mb-4 text-4xl font-bold text-purple-800 p-4 h-24 flex items-center justify-center">[Kata]</div>
                <input type="text" id="answer-input" placeholder="Tulis jawabanmu di sini..." class="w-full max-w-sm p-2 border-2 border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none">
                <button id="check-btn" class="bg-purple-500 text-white font-bold py-2 px-6 rounded-lg mt-2 hover:bg-purple-600 transition-colors">Cek Jawaban</button>
                <p id="feedback-message" class="mt-4 font-semibold h-6"></p>
                <button id="next-btn" class="hidden bg-green-500 text-white font-bold py-2 px-6 rounded-lg mt-2 hover:bg-green-600 transition-colors">Soal Berikutnya</button>
            </div>
        </section>

        <!-- Bonus 32: Sertifikat -->
        <section id="bonus-32" class="lesson-card bg-white p-6 md:p-8 rounded-2xl shadow-lg mb-8">
            <h2 class="text-2xl font-bold text-purple-700 mb-4">32. Sertifikat ‚ÄúEnglish Explorer Junior‚Äù üèÜ</h2>
            
            <!-- Formulir Input Baru -->
            <div class="bg-gray-50 p-6 rounded-lg mb-4 grid grid-cols-1 md:grid-cols-2 gap-x-6">
                <div class="input-group">
                    <label for="student-name-input">Nama Murid:</label>
                    <input type="text" id="student-name-input" class="p-2 border rounded-md" placeholder="Contoh: Budi">
                </div>
                <div class="input-group">
                    <label for="school-name-input">Nama Sekolah:</label>
                    <input type="text" id="school-name-input" class="p-2 border rounded-md" placeholder="Contoh: SDN 1 Merdeka">
                </div>
                 <div class="input-group">
                    <label for="headmaster-name-input">Nama Kepala Sekolah:</label>
                    <input type="text" id="headmaster-name-input" class="p-2 border rounded-md" placeholder="Contoh: Drs. Ahmad">
                </div>
                <div class="input-group">
                    <label for="teacher-name-input">Nama Guru:</label>
                    <input type="text" id="teacher-name-input" class="p-2 border rounded-md" placeholder="Contoh: Siti, S.Pd.">
                </div>
                <div class="md:col-span-2 text-center mt-4">
                     <button id="generate-cert-btn" class="bg-blue-500 text-white py-2 px-6 rounded-md">Terapkan ke Sertifikat</button>
                </div>
            </div>

            <div id="certificate-wrapper">
                <div id="certificate" class="text-gray-800">
                    <div class="w-full flex justify-between items-start absolute top-20 left-0 px-20">
                         <svg class="h-24 w-24 text-purple-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.225 48.225 0 0112 4.5a48.225 48.225 0 0111.41 3.582l-2.072 1.036m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5z" />
                         </svg>
                         <svg class="h-28 w-28 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.728c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                         </svg>
                    </div>
                    
                    <div class="text-center mt-48">
                        <h1 class="font-cinzel text-5xl tracking-widest">CERTIFICATE</h1>
                        <p class="text-xl mt-2">OF COMPLETION</p>
                        
                        <p class="mt-16 text-xl">This Certificate is proudly presented to</p>
                        
                        <p id="cert-student-name" class="font-tangerine text-8xl my-4 text-gray-900">[ Nama Murid ]</p>
                        
                        <div class="w-2/3 mx-auto h-px bg-gray-400"></div>

                        <p class="mt-8 text-lg w-3/4 mx-auto">
                           For successfully completing the "English for Kids Fun Learning" course at
                        </p>
                        <p id="cert-school-name" class="font-cinzel text-3xl mt-2">[ Nama Sekolah ]</p>
                    </div>

                    <div class="w-full flex justify-between items-end absolute bottom-16 left-0 px-24 mt-auto">
                        <div class="text-center">
                            <p id="cert-headmaster-name" class="font-semibold">[ Nama Kepala Sekolah ]</p>
                            <div class="w-48 h-px bg-gray-600 my-1"></div>
                            <p class="text-sm">Headmaster</p>
                        </div>
                        <div class="text-center">
                            <p id="cert-teacher-name" class="font-semibold">[ Nama Guru ]</p>
                            <div class="w-48 h-px bg-gray-600 my-1"></div>
                            <p class="text-sm">Teacher</p>
                        </div>
                    </div>
                </div>
            </div>
             <button id="download-cert-btn" class="w-full mt-4 bg-gray-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-700 transition-colors">Unduh Sertifikat A4 (JPEG)</button>
        </section>
        
    </main>

    <footer class="bg-gray-800 text-white text-center p-4 mt-10">
        <p>&copy; 2024 English for Kids Fun Learning. Dibuat dengan ‚ù§Ô∏è.</p>
    </footer>

    <script>
        // --- Game Logic ---
        const clueWordDiv = document.getElementById('clue-word');
        const answerInput = document.getElementById('answer-input');
        const checkBtn = document.getElementById('check-btn');
        const feedbackMessage = document.getElementById('feedback-message');
        const nextBtn = document.getElementById('next-btn');
        const questions = [
            { indonesian: 'apel', answer: 'apple' }, { indonesian: 'kucing', answer: 'cat' },
            { indonesian: 'pensil', answer: 'pencil' }, { indonesian: 'biru', answer: 'blue' },
            { indonesian: 'keluarga', answer: 'family' }, { indonesian: 'buku', answer: 'book' }
        ];
        let currentQuestionIndex = 0;
        function loadQuestion() {
            clueWordDiv.textContent = questions[currentQuestionIndex].indonesian;
            answerInput.value = '';
            feedbackMessage.textContent = '';
            nextBtn.classList.add('hidden');
            answerInput.disabled = false;
            checkBtn.disabled = false;
            answerInput.focus();
        }
        function checkAnswer() {
             const userAnswer = answerInput.value.trim().toLowerCase();
            if (userAnswer === questions[currentQuestionIndex].answer) {
                feedbackMessage.textContent = 'Benar! üéâ';
                feedbackMessage.style.color = 'green';
                nextBtn.classList.remove('hidden');
                answerInput.disabled = true;
                checkBtn.disabled = true;
            } else {
                feedbackMessage.textContent = 'Salah, coba lagi!';
                feedbackMessage.style.color = 'red';
            }
        }
        checkBtn.addEventListener('click', checkAnswer);
        answerInput.addEventListener('keyup', (event) => { if (event.key === 'Enter') checkAnswer(); });
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex = (currentQuestionIndex + 1) % questions.length;
            loadQuestion();
        });
        loadQuestion();

        // --- Certificate Logic ---
        const studentNameInput = document.getElementById('student-name-input');
        const schoolNameInput = document.getElementById('school-name-input');
        const headmasterNameInput = document.getElementById('headmaster-name-input');
        const teacherNameInput = document.getElementById('teacher-name-input');
        const generateCertBtn = document.getElementById('generate-cert-btn');
        
        const certStudentName = document.getElementById('cert-student-name');
        const certSchoolName = document.getElementById('cert-school-name');
        const certHeadmasterName = document.getElementById('cert-headmaster-name');
        const certTeacherName = document.getElementById('cert-teacher-name');

        const downloadCertBtn = document.getElementById('download-cert-btn');
        const certificateElement = document.getElementById('certificate');

        generateCertBtn.addEventListener('click', () => {
            certStudentName.textContent = studentNameInput.value.trim() || "[ Nama Murid ]";
            certSchoolName.textContent = schoolNameInput.value.trim() || "[ Nama Sekolah ]";
            certHeadmasterName.textContent = headmasterNameInput.value.trim() || "[ Nama Kepala Sekolah ]";
            certTeacherName.textContent = teacherNameInput.value.trim() || "[ Nama Guru ]";
        });

        downloadCertBtn.addEventListener('click', () => {
            downloadCertBtn.textContent = 'Sedang memproses...';
            downloadCertBtn.disabled = true;

            html2canvas(certificateElement, {
                useCORS: true,
                scale: 2 
            }).then(canvas => {
                const link = document.createElement('a');
                const studentName = studentNameInput.value.trim().replace(/ /g, '_') || 'english-explorer';
                link.download = `sertifikat-${studentName}.jpeg`;
                link.href = canvas.toDataURL('image/jpeg', 0.9);
                link.click();
                
                downloadCertBtn.textContent = 'Unduh Sertifikat A4 (JPEG)';
                downloadCertBtn.disabled = false;
            }).catch(err => {
                console.error('Oops, something went wrong!', err);
                downloadCertBtn.textContent = 'Gagal, coba lagi';
                downloadCertBtn.disabled = false;
            });
        });
    </script>
</body>
</html>
